Программа для создания изображений на основе TKinter.

Реализованный функционал:

drawing_app.py

Данная программа представляет собой пример использования библиотеки TKinter для создания графического интерфейса.



Класс DrawingApp
Инициализация __init__(self, root)

Конструктор класса принимает один параметр:

- root: Это корневой виджет Tkinter, который служит контейнером для всего интерфейса приложения.

Внутри конструктора выполняются следующие ключевые действия:

- Устанавливается заголовок окна приложения.

- Создается объект изображения (self.image) с использованием библиотеки Pillow. Это изображение служит виртуальным холстом, на котором происходит рисование. Изначально оно заполнено белым цветом.

- Инициализируется объект ImageDraw.Draw(self.image), который позволяет рисовать на объекте изображения.

- Создается виджет Canvas Tkinter, который отображает графический интерфейс для рисования. Размеры холста установлены в 600x400 пикселей.

- Вызывается метод self.setup_ui(), который настраивает элементы управления интерфейса.

- Привязываются обработчики событий к холсту для отслеживания движений мыши при рисовании () и сброса состояния кисти при отпускании кнопки мыши ().



Метод setup_ui(self)

Этот метод отвечает за создание и расположение виджетов управления:

- Кнопки "Очистить", "Выбрать цвет" и "Сохранить" позволяют пользователю очищать холст, выбирать цвет кисти и сохранять текущее изображение соответственно.

- Слайдер для изменения размера кисти дает возможность выбирать толщину линии от 1 до 10 пикселей.



Метод paint(self, event)

Функция вызывается при движении мыши с нажатой левой кнопкой по холсту. Она рисует линии на холсте Tkinter и параллельно на объекте Image из Pillow:

- event: Событие содержит координаты мыши, которые используются для рисования.

- Линии рисуются между текущей и последней зафиксированной позициями курсора, что создает непрерывное изображение.



Метод reset(self, event)

Сбрасывает последние координаты кисти. Это необходимо для корректного начала новой линии после того, как пользователь отпустил кнопку мыши и снова начал рисовать.



Метод clear_canvas(self)

Очищает холст, удаляя все нарисованное, и пересоздает объекты Image и ImageDrawдля нового изображения.



Метод choose_color(self)

Открывает стандартное диалоговое окно выбора цвета и устанавливает выбранный цвет как текущий для кисти.



Метод save_image(self)

Позволяет пользователю сохранить изображение, используя стандартное диалоговое окно для сохранения файла. Поддерживает только формат PNG.
В случае успешного сохранения выводится сообщение об успешном сохранении.



Обработка событий

- : Событие привязано к методу paint, позволяя рисовать на холсте при перемещении мыши с нажатой левой кнопкой.

- : Событие привязано к методу reset, который сбрасывает состояние рисования для начала новой линии.



Использование приложения

Пользователь может рисовать на холсте, выбирать цвет и размер кисти, очищать холст и сохранять в формате PNG.

Внесенные изменения:
1. Выбор размера кисти из списка:
Реализовано: tk.OptionMenu для создания выпадающего списка. Заполнен предопределенными значениями, sizes = [1, 2, 5, 7, 10].
При выборе размера из списка обновляется текущий размер кисти
(в том числе меняется положение слайдера).
Установлен начальный рамер кисти: self.brush_size = 1  # Начальный размер кисти
Добавлена обработка правого клика: self.canvas.bind('<Button-3>', self.show_brush_size_menu)  # Обработка правого клика
self.brush_size_scale.set(self.brush_size)  # Устанавливаем начальный размер
Добавлены две функции:

    def show_brush_size_menu(self, event):
        sizes = [1, 3, 5, 7, 10]
        menu = tk.Menu(self.root, tearoff=0)

        for size in sizes:
            menu.add_command(label=f"{size}", command=lambda s=size: self.update_brush_size(s))

        menu.post(event.x_root, event.y_root)  # Отображаем меню в позиции курсора

    def update_brush_size(self, selected_size):
        self.brush_size = selected_size  # Обновляем размер кисти на основе выбора
        self.brush_size_scale.set(selected_size)  # Обновляем слайдер (для синхронизации)

2.Добавление инструмента в виде кнопки "Ластик".
Добавлена кнопка "Ластик" (tk.Button), и при её нажатии устанавливайте self.pen_color в цвет фона ("white").
При переключении обратно на инструмент кисти восстанавливается предыдущий цвет.
3. Добавлен инструмент "пипетка". По клику правой кнопкой мыши берет цвет из текущего пиксяля и рисует этим цветом.
ОБновлено нижеперечисленое:
    def show_brush_size_menu(self, event):
        sizes = [1, 3, 5, 7, 10]
        menu = tk.Menu(self.root, tearoff=0)

        for size in sizes:
            menu.add_command(label=f"{size}", command=lambda s=size: self.update_brush_size(s))

        menu.post(event.x_root, event.y_root)  # Отображаем меню в позиции курсора

    def update_brush_size(self, selected_size):
        self.brush_size = selected_size  # Обновляем размер кисти
        self.brush_size_scale.set(selected_size)  # Обновляем слайдер (для синхронизации)

    def rgb_to_hex(self, rgb):
        """Преобразует RGB-кортеж в HEX-строку, понятную Tkinter."""
        return f'#{rgb[0]:02x}{rgb[1]:02x}{rgb[2]:02x}'

    def pick_color(self, event):
        # Получаем координаты курсора
        x, y = event.x, event.y
        # Получаем цвет пикселя из изображения
        rgb_color = self.image.getpixel((x, y))
        self.pen_color = self.rgb_to_hex(rgb_color)  # Преобразуем в HEX формат
#       print(f"Цвет выбран: {self.pen_color}")  # Теперь это в формате, который Tkinter понимает
4.Добавление функциональных горячих клавиш быстрого действия.
Для добавления горячих клавиш используем метод self.root.bind('<Control-s>', self.save_image)
для сохранения и self.root.bind('<Control-c>', self.choose_color) для выбора цвета.
Функции обратного вызова принимать аргумент события, даже если они его не используют.

